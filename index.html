<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Refreshes the entire page every 45 seconds -->
  <meta http-equiv="refresh" content="45" />
  <title>Tram Times at Godrans</title>
</head>
<body>
  <h1>Tram Times at Godrans (T1 & T2)</h1>

  <h2>T1</h2>
  <ul id="t1-schedules"></ul>

  <h2>T2</h2>
  <ul id="t2-schedules"></ul>

  <script>
    function fetchTramData(line, stop, elementId) {
      const apiUrl = `https://divia.jbdemonte.fr/tram/${line}/stop/${encodeURIComponent(stop)}`;

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          const listElement = document.getElementById(elementId);
          listElement.innerHTML = ''; // Clear old items

          if (data && data.schedules && data.schedules.length > 0) {
            data.schedules.forEach(schedule => {
              const li = document.createElement('li');
              li.textContent = `Destination: ${schedule.destination} - Time: ${schedule.time}`;
              listElement.appendChild(li);
            });
          } else {
            listElement.innerHTML = '<li>No data found.</li>';
          }
        })
        .catch(err => {
          console.error(err);
          document.getElementById(elementId).innerHTML = '<li>Error fetching data.</li>';
        });
    }

    // Fetch T1 and T2 data for "Godrans"
    fetchTramData('T1', 'Godrans', 't1-schedules');
    fetchTramData('T2', 'Godrans', 't2-schedules');
  </script>
</body>
</html>
